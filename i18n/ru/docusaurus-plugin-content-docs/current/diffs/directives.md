---
sidebar_position: 7
title: Директивы препроцессора 
---

В языке **hapet** доступна более обширная поддержка директив, в отличие от **C#**, но все же не настолько обширная, как в **C/C++**.  

:::info
В языке **hapet** выражения блоков ***#if***, ***#define*** и пр. должны заканчиваться на ```;```, как и обычные выражения языка.
:::

## #define

Директива ***#define*** теперь допускает объявление констрантного значения рядом с названием. Для значений допустимы только типы ***string*** и ***int***. Пример:
```csharp
#define MY_TEST_DEFINE 10;
```

Все директиры ***#define***, указанные в файле, будут доступны только в этом же файле.   
Для объявления глобальных директив ***#define***, доступных по всему проекту, можно дополнить свой файл **.hptproj** следующими строчками:
```xml
<ItemGroup>
    <Define Name="GLOBAL_DEFINE">TestString</Define>
    <Define Name="GLOBAL_DEFINE2"/>
</ItemGroup>
```
Обратите внимание, что глобавльное объявление ***#define*** поддерживает только тип ***string*** на данный момент.  

### Предопределенные директивы #define  
При сборке проекта, автоматически будут объявлены глобавльные объявления:  
- **HAPET_VERSION** - содержит в себе версию компилятора **hapet**, например "1.2.3", тип ***string***;
- **TARGET_PLATFORM** - содержит в себе название целевой платформы, например "win-x64", тип ***string***;
- **CURRENT_PLATFORM** - содержит в себе название текущей платформы, например "linux-x64", тип ***string***;
- **DEBUG/RELEASE** - при сборке в режиме *Debug* будет объявлена директива **DEBUG**, при сборке в *Release* - **RELEASE**.  

## #if, #elif, #else, #endif  
Работа этих директив идентична их работе в **C#**, за исключением обработки условий в ***#if*** и ***#elif***:
- если директива была объявлена без значения, то условие будет выполнено, если директива вообще была объявлена;
- если директива была объявлена со значением типа ***int***, то в условии доступно использование операторов стравнения: ```<, >, <=, >=, ==, !=```;
- если директива была объявлена со значением типа ***string***, то в условии доступно использование операторов сравнения строк: ```==, !=```. Если строки имеют вид *1.2.3* (как версии), то для них доступны сравнения: ```<, >, <=, >=```; 
- доступны операторы ```||, &&``` для логических выражений.  

Пример:  
```csharp
#if HAPET_VERSION < "0.3.2";
Console.WriteLine("Version is lower than 0.3.2");
#elif !DEBUG;
Console.WriteLine("We are not in DEBUG mode");
#endif
```

## #undef

Удаляет объявление из файла или из глобального хранилища, если это объявление не было найдено в файле.

## #error и #warning 

Работает так, же как в **C#**, но сообщение должно быть в кавычках:
```csharp
#error "Some error text here";
```
