---
sidebar_position: 4
title: Обобщения
---

# Обобщения

В общем случае, обобщения работают так же, как в **C#**, но с некоторыми ограничениями/изменениями.  

## Статичные поля в обобщенных типах  

В отличие от **C#** статичные поля в типах являются атомарными для всех конкретных итоговых типов:  
```csharp
public class TestClass<T>
{
    public static int TestField = 0;
}

// в Main
var a = new TestClass<int>();
a.TestField = 5;

var b = new TestClass<string>();
var result = b.TestField; // здесь result будет равен 5
```  

Это добавляет ограничение на статичные поля: тип статичных полей в обобщенных типах **не** может содержать в себе универсальные параметры родителького типа.

## Ограничения для универсальных параметров   

Ограничения для универсальных параметров в основном являются такими же, как в **C#**, но также было добавлено несколько дополнительных:  
- ***new()*** - теперь это ограничение может использоваться не только без типов, но и с ними. Можно, например, указать необходимость использования типа, в котором есть конструктор с параметрами типов **string** и **int** вот так: 
    ``` cs
    ... where T: new(string, int) ...
    ```
- ***delegate*** - указывает на то, что универсальный тип должен быть **delegate**;  
- ***enum*** - указывает на то, что универсальный тип должен быть **enum** (не знаю, зачем это может быть нужно, но ладно);

Различные "странные" ограничения были убраны: ***notnull***, ***default***, ***allows ref struct*** и все, что связано с *nullable*.